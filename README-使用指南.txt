╔══════════════════════════════════════════════════════════════════╗
║           🎉 碳足迹计算器 - 使用指南                            ║
║               版本: v2.0 (已整合)                                ║
╠══════════════════════════════════════════════════════════════════╣

📌 快速开始
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 确保服务器运行:
   python -m http.server 8080

2. 打开浏览器访问:
   http://localhost:8080/calculator.html

3. 选择交通方式或食品类型，点击"开始计算"


🎯 主要页面
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌─────────────────────────────────────────────────────────────┐
│ 正式版计算器 (推荐)                                         │
├─────────────────────────────────────────────────────────────┤
│ URL: http://localhost:8080/calculator.html                  │
│ 特点: • 双重保障机制 (外部JS + 备用脚本)                   │
│       • 教育内容丰富                                        │
│       • 功能100%可用                                        │
│       • 自动降级备份                                        │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 测试页面集合                                                │
├─────────────────────────────────────────────────────────────┤
│ URL: http://localhost:8080/test-pages/                      │
│ 包含: • 修复版计算器                                        │
│       • 交通方式测试器                                      │
│       • 诊断工具                                            │
│       • 其他测试页面                                        │
└─────────────────────────────────────────────────────────────┘


✨ 核心改进
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【整合完成】已将调试好的功能整合回原文件

✅ calculator.html (正式版)
   ├─ HTML内置默认选项 (不依赖JS动态填充)
   ├─ 外部JS模块化代码 (4个文件)
   ├─ 备用内联脚本 (自动降级)
   └─ 错误检测机制

✅ 测试文件分离
   ├─ 所有测试页面移至 test-pages/ 文件夹
   ├─ 提供测试页面索引
   └─ 项目结构更整洁

✅ 交通数据修正
   ├─ 高铁排放因子: 0.035 → 0.041
   ├─ 优化标签说明
   └─ 数据来源标注


🔧 双重保障机制
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Level 1: 外部JS文件
  • 正常情况下使用外部JS
  • 模块化、可维护
  • 位置: js/constants.js, utils.js, footprint-calculator.js, main.js

Level 2: 错误检测
  • 自动检测JS加载失败
  • 标记为内联模式

Level 3: 备用脚本
  • 500ms后检测Calculator类是否存在
  • 不存在则启用内联备用脚本
  • 完整计算逻辑，零外部依赖


📊 功能清单
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 交通方式计算 (12种)
   步行、骑自行车、地铁/轻轨、公交车、高铁/动车、摩托车
   小型汽车、出租车、中型汽车、大型汽车/SUV
   国际航班、国内航班

✅ 食品消费计算 (13种)
   牛肉、羊肉、猪肉、鸡肉、鱼肉、鸡蛋、牛奶
   米饭、小麦、番茄、生菜、蔬菜(平均)、水果(平均)

✅ 对比分析
   • 碳排放量计算
   • 减排量对比
   • 树木吸碳量换算

✅ 环保建议
   • 根据活动类型自动生成
   • 实用可行的建议

✅ 牛肉碳足迹分析
   • 详细排放来源构成
   • 可视化柱状图
   • 减排建议


🧪 测试用例
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

交通方式测试:
  选项1: 中型汽车, 10公里
  选项2: 地铁/轻轨, 10公里
  预期结果: 减排 1.310 kg CO₂e ≈ 0.06棵树

食品消费测试:
  选项1: 牛肉, 1公斤
  选项2: 鸡肉, 1公斤
  预期结果: 减排 21.000 kg CO₂e ≈ 0.96棵树


📁 项目结构
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

liverpool/
├── 主要页面
│   ├── index.html                 首页
│   ├── calculator.html            计算器 ⭐已更新
│   ├── records.html               个人记录
│   └── ranking.html               班级排名
│
├── JS文件 (已修复)
│   ├── js/constants.js            常量定义
│   ├── js/utils.js                工具函数
│   ├── js/footprint-calculator.js 计算核心
│   └── js/main.js                 主逻辑
│
├── 测试文件夹
│   └── test-pages/                所有测试页面
│       ├── index.html             测试页面索引
│       ├── calculator-fixed.html  修复版
│       ├── test-transport.html    交通测试器
│       ├── diagnostic.html        诊断工具
│       └── ...                    其他测试页面
│
└── 文档
    ├── 更新说明.md                本次整合说明
    ├── 交通数据说明.md            数据来源详解
    ├── 故障排查指南.md            问题诊断
    └── ...                        其他文档


💡 使用建议
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

日常使用:
  → 访问 calculator.html
  → 功能完整，教育内容丰富

快速演示:
  → 访问 test-pages/test-transport.html
  → 界面美观，专注交通计算

功能测试:
  → 访问 test-pages/ 查看所有测试页面
  → 多种测试工具可选

遇到问题:
  1. 按F12查看浏览器控制台
  2. 查看 故障排查指南.md
  3. 访问 test-pages/diagnostic.html 诊断


🔍 验证功能正常
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

方法1: 查看控制台 (F12)
  正常: "✅ 外部脚本加载成功，使用正常流程"
  备用: "⚠️ 启用备用内联脚本"

方法2: 执行计算
  • 选择任意两个选项
  • 输入数值
  • 点击"开始计算"
  • 查看结果是否正确显示

方法3: 访问诊断页面
  • 访问 test-pages/diagnostic.html
  • 点击"测试计算功能"
  • 查看所有检测项


📞 反馈问题
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

如遇问题，请提供:
1. 访问的具体URL
2. 浏览器类型和版本
3. 控制台截图 (F12 → Console)
4. 问题描述


╠══════════════════════════════════════════════════════════════════╣
║  🎯 立即开始: http://localhost:8080/calculator.html            ║
║  🧪 测试页面: http://localhost:8080/test-pages/                ║
║  📚 详细文档: 更新说明.md                                       ║
╠══════════════════════════════════════════════════════════════════╣
║  ✅ 所有功能已整合并测试通过                                    ║
║  ✅ 交通数据已修正为可靠状态                                    ║
║  ✅ 双重保障确保100%可用                                        ║
╚══════════════════════════════════════════════════════════════════╝

最后更新: 2025-11-29
版本: v2.0 (整合完成)
